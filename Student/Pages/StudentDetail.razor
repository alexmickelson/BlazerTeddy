@page "/StudentDetail/{id:int}"

@using Student.Services
@using Student.Models
@using Student.Components
@using Student.ViewModels

@inject StudentDetailViewModel vm

<h1>@vm.Student.Name</h1>
<br/>
<h3>Notes:</h3>

@foreach (var note in vm.GetNotes())
{
    <p>@note.Content</p>
}

<input type="text"
       placeholder="New Note"
       @bind="vm.newNote" />
<button class="btn btn-secondary"
        type="submit"
        @onclick="vm.AddNote">Add Note</button>
<div class="text-danger">@vm.errorAlert</div>


<br/>
<h3>Restrictions:</h3>
<ul>
    @foreach(var restriction in vm.GetRestrictions())
    {
        <li>@restriction.Name</li>
    }
</ul>
<input type="number"
       placeholder="StudentId"
       @bind="vm.NewRestrictionId" />
<button class="btn btn-secondary"
        type="submit"
        @onclick="vm.AddRestriction">Add Restriction</button>


@code {
    [Parameter]
    public int id {get; set;}

    protected override void OnParametersSet()
    {
        vm.LoadStudent(id);
    }

    protected override void OnInitialized()
    {
        OnParametersSet();
    }


}