@using TeddyBlazor.Models
@using TeddyBlazor.Services
@using TeddyBlazor.ViewModels

@inject StudentListViewModel vm

<h3>StudentList</h3>

<input type="text"
        @bind-value="vm.NameFilter" 
        @bind-value:event="oninput"/>
<select @bind-value="vm.ClassIdFilter" 
        @bind-value:event="oninput">
    <option value="-1">Class</option>
    @foreach (var option in vm.GetClassOptions())
    {
        <option value="@option.ClassId">@option.ClassName</option>
    }
</select> 

@foreach (var student in vm.GetFilteredStudents())
{
 <div><a class="btn btn-secondary" href="/StudentDetail/@student.StudentId">@student.StudentName</a></div>
}


@code {
    
    protected override void OnInitialized()
    {
        vm.OnInitialized();
    }
    protected override async Task OnInitializedAsync()
    {
        await vm.OnInitializedAsync();
    }
    protected override void OnParametersSet()
    {
        vm.OnParametersSet();
    }
    protected override async Task OnParametersSetAsync()
    {
        await vm.OnParametersSetAsync();
    }
}
